<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Upload Photos - EcoMetric</title>
<style>
body { font-family: Arial; background: #f1f8e9; margin:0; padding:0;}
header{background:#388e3c;color:white;padding:15px;text-align:center;font-size:22px;font-weight:bold;}
.container{max-width:600px;margin:30px auto;background:white;padding:25px;border-radius:12px;box-shadow:0 5px 15px rgba(0,0,0,0.1);}
button,input[type=file]{width:100%;padding:12px;margin-bottom:15px;border-radius:8px;border:1px solid #a5d6a7;font-size:14px;}
button{border:none;background:#66bb6a;color:white;cursor:pointer;transition:0.2s;}
button:hover{background:#2e7d32;}
.photo-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px;margin-top:20px;}
.photo-card{background:#e8f5e9;padding:5px;border-radius:8px;text-align:center;}
.photo-card img{width:100%;height:120px;object-fit:cover;border-radius:6px;}
.photo-card button{background:#e53935;margin-top:5px;border:none;color:white;padding:6px;border-radius:6px;cursor:pointer;}
.photo-card button:hover{background:#b71c1c;}
</style>
</head>
<body>

<header>Upload My Product Photos</header>

<div class="container">
    <input type="file" id="photoFile" multiple>
    <button onclick="handleUpload()">Upload Photos</button>
    <button onclick="window.location='reward.html'">My Reward</button>

    <div class="photo-list" id="photoList"></div>
</div>

<script src="reward.js"></script>
<script>
function renderPhotos() {
    const container = document.getElementById("photoList");
    container.innerHTML = '';
    getUserPhotos().forEach((photo,index)=>{
        const card = document.createElement("div");
        card.className = "photo-card";
        card.innerHTML = `<img src="${photo}"><button onclick="deletePhoto(${index}); renderPhotos();">Delete</button>`;
        container.appendChild(card);
    });
}

function handleUpload() {
    const files = document.getElementById("photoFile").files;
    if(files.length===0){alert("Select at least one image."); return;}
    Array.from(files).forEach(file=>{
        const reader = new FileReader();
        reader.onload = function(e){ addPhoto(e.target.result); renderPhotos();}
        reader.readAsDataURL(file);
    });
    document.getElementById("photoFile").value='';
    alert(`${files.length} photo(s) uploaded successfully!`);
}

// Initial render
renderPhotos();
</script>

</body>
</html>